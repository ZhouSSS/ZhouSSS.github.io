{"Linuxç³»ç»Ÿé…ç½®ä¸è°ƒä¼˜/CentOS7.9-å‘½ä»¤æ‚é¡¹":{"slug":"Linuxç³»ç»Ÿé…ç½®ä¸è°ƒä¼˜/CentOS7.9-å‘½ä»¤æ‚é¡¹","filePath":"Linuxç³»ç»Ÿé…ç½®ä¸è°ƒä¼˜/CentOS7.9 å‘½ä»¤æ‚é¡¹.md","title":"CentOSå‘½ä»¤æ‚é¡¹","links":[],"tags":["CentOS","Linux"],"content":"\n1.1 VMwareè™šæ‹Ÿæœºé…ç½®\n\nå¼€æœºæ— ipé—®é¢˜ï¼š\n\n1.ç¡®è®¤ç½‘å¡å\nip a\n \n2.ç¼–è¾‘ç½‘å¡é…ç½®æ–‡ä»¶\nsudo vi sudo vi /etc/sysconfig/network-scripts/ifcfg-ens33\n \nä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼šä¸»è¦æ˜¯ONBOOT=yes\nTYPE=Ethernet\nBOOTPROTO=dhcp\nNAME=ens33\nDEVICE=ens33\nONBOOT=yes\n \n3.é‡å¯åå¯è‡ªåŠ¨åˆ†é…ip\n1.2 é…ç½®ssh+rootè¿œç¨‹è¿æ¥\n1.é…ç½®rootç”¨æˆ·å¯†ç \nsudo passwd root\n \n2.ç¼–è¾‘sshé…ç½®æ–‡ä»¶\nvi /etc/ssh/sshd_config\n \n3.ä¿®æ”¹PermitRootLoginé¡¹ä¸ºyes,å…è®¸rootç”¨æˆ·ç™»å½•\n \n4.systemctl restart sshd\n1.3 é…ç½®ä»£ç†æœåŠ¡\n1.æ·»åŠ ç¯å¢ƒå˜é‡\nvi /etc/profile\n//æˆ–\nvi ~/.bashrc\n \n2.æ·»åŠ ä¸¤è¡Œ:\nexport http_proxy=&quot;http://ip:port&quot;\nexport https_proxy=&quot;http://ip:port&quot;\n \n3.ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ\nsource /etc/profile\n//æˆ–\nsource ~/.bashrc\n \n4.dockerä»£ç†éœ€å•ç‹¬é…ç½®\nmkdir -p /etc/systemd/system/docker.service.d/ &amp;&amp; sudo touch /etc/systemd/system/docker.service.d/proxy.conf\næ·»åŠ ä»£ç†ï¼š\nsudo bash -c &#039;cat &gt; /etc/systemd/system/proxy.conf &lt;&lt;EOF\n[Service]\nEnvironment=&quot;HTTP_PROXY=http://ip:port/&quot;\nEnvironment=&quot;HTTPS_PROXY=http://ip:port/&quot;\nEnvironment=&quot;NO_PROXY=localhost,127.0.0.1&quot;\nEOF&#039;\n1.4 åˆ¶ä½œç¦»çº¿å®‰è£…åŒ…\n\nCentOSé€’å½’ä¸‹è½½ç›®æ ‡å®‰è£…åŒ…å’Œå…¶æ‰€æœ‰ä¾èµ–åŒ…\n\n1.å®‰è£…yumæ’ä»¶\nyum install -y yum-utils\n \n2.å°†&quot;ç›®æ ‡å®‰è£…åŒ…å&quot; æ›¿æ¢ä¸ºè¦ä¸‹è½½çš„åŒ…å destdirä¸ºåŒ…ä¸‹è½½ç›®å½•(å½“å‰ç›®å½•)\n(echo ç›®æ ‡å®‰è£…åŒ…å;repoquery --requires --resolve --recursive --plugins --qf &quot;%{name}&quot; ç›®æ ‡å®‰è£…åŒ…å;) | sort -u | xargs yumdownloader --destdir=./offline-pkg\n \n3.æŸ¥çœ‹ä¸‹è½½è·¯å¾„ä¸‹åŒ…å«æ‰€æœ‰çš„rpmåŒ…ï¼Œæ‰“åŒ…å¸¦èµ°\ntar zcvf offline-pkg.tar.gz ./offline-pkg/\n \n4.è½¬ç§»åˆ°æ–°æœºå™¨å\ntar zxvf offline-pkg.tar.gz\ncd offline-pkg\nsudo yum localinstall *.rpm\næ³¨æ„ï¼š\n\nä»¥ä¸‹å‘½ä»¤ä¸ºé€’å½’æŸ¥æ‰¾ç›®æ ‡çš„ä¾èµ–åŒ…å¹¶ä¸‹è½½ï¼Œå¹¶ä¸åŒ…æ‹¬ç›®æ ‡æœ¬èº«ï¼Œå› æ­¤éœ€å°†ç›®æ ‡åŒ…ä¸€å¹¶æ·»åŠ åˆ°ä¾èµ–é¡¹ä¸­\n\nsudo repoquery --requires --resolve --recursive --plugins --qf &quot;%{name}&quot; ç›®æ ‡å®‰è£…åŒ…å | sort -u | xargs yumdownloader --destdir=.\n\nC++è°ƒä¼˜\nç¼–è¯‘é“¾æ¥å‘½ä»¤\n-fno-exceptions -fno-rtti -nostdlib++"},"index":{"slug":"index","filePath":"index.md","title":"æˆ‘çš„ä¸»é¡µ","links":["cn/"],"tags":[],"content":"æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢ï¼\n\nä¸­æ–‡é¡µé¢\n\n\n  \n    ğŸ¯ è¦æœ‰ç›®æ ‡\n    ç¡®å®šæ¸…æ™°çš„ç›®æ ‡ï¼ˆçŸ­æœŸå¯è¡Œã€é•¿æœŸå®å¤§ï¼‰ï¼Œä½œä¸ºä¼˜åŒ–æ–¹å‘ã€‚\n  \n  \n    ğŸš€ ç›®æ ‡è¦å¤§\n    åˆ«åªè®¾æ˜“è¾¾æˆçš„ç›®æ ‡ï¼Œè¿œå¤§çš„ç›®æ ‡é¿å…è¿‡æ—©æ”¶æ•›åˆ°â€œç®€å•è§£â€ã€‚\n  \n  \n    ğŸƒ åšæŒèµ°\n    æ¯æ¬¡ä¼°è®¡ä¸€ä¸ªæ–¹å‘ï¼Œè¿ˆå°æ­¥ï¼Œé‡å¤æ‰§è¡Œã€‚æŒç»­æ¯”å•æ¬¡å®Œç¾æ›´é‡è¦ã€‚\n  \n  \n    ğŸ”¥ ç—›è‹¦çš„å·\n    æ”¹å˜å¸¸ä¼´ç—›è‹¦ï¼Œä½†ä¸æ”¹å˜å°±æ²¡æœ‰æˆé•¿ï¼›è¾¨åˆ«æœ‰ä»·å€¼çš„ç—›è‹¦ã€‚\n  \n  \n    ğŸ›Œ å¯ä»¥èººå¹³\n    æ­¥é•¿è¦å¹³è¡¡ï¼šå¤ªå°åœæ»ï¼Œå¤ªå¤§è€—å°½æ¿€æƒ…ã€‚å‘¨æœŸæ€§è°ƒæ•´å¹¶å…è®¸ä¼‘æ¯ã€‚\n  \n  \n    ğŸ” å››å¤„çœ‹çœ‹\n    éšæœºæ€§ä¸è¯•é”™å¸®åŠ©è·³å‡ºå±€éƒ¨ï¼Œæ‰©å¤§è§†é‡ä¸å¯èƒ½æ€§ã€‚\n  \n  \n    â³ å¿«ä¹Ÿæ˜¯æ…¢\n    å‰æœŸå¤ªå¿«å¯èƒ½å¯¼è‡´åæœŸä¹åŠ›ï¼›å…è®¸å‰æœŸå¾˜å¾Šæ¥ä¿ç•™é•¿æœŸåŠ¨èƒ½ã€‚\n  \n  \n    ğŸ èµ¢åœ¨èµ·ç‚¹\n    èµ·ç‚¹ä¼˜åŠ¿æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œè¯†åˆ«å¹¶åˆ©ç”¨å®ƒï¼ŒåŒæ—¶ä¿æŒè°¦é€Šã€‚\n  \n  \n    ğŸ›£ å¾ˆè¿œä¹Ÿèƒ½åˆ°è¾¾\n    èµ·ç‚¹è¿œå¹¶éä¸å¯è¾¾ï¼Œéšæœºé‡å¯ä¸è€å¿ƒä¼šå¸¦æ¥æ”¶æ•›ã€‚\n  \n  \n    âœ¨ ç‹¬ä¸€æ— äºŒ\n    è¿‡ç¨‹å‚æ•°ï¼ˆä½ çš„é€‰æ‹©ï¼‰æ˜¯ç‹¬ç‰¹çš„ï¼Œå°Šé‡å¹¶è®°å½•ä½ çš„è·¯å¾„ã€‚\n  \n  \n    ğŸ§© ç®€å•æœ€å¥½\n    å¤æ‚ç­–ç•¥å…ˆæ”¾ä¸€è¾¹ï¼Œå…ˆç”¨ç®€å•å¯å¤ç°çš„æ–¹æ³•ä¸æ–­è¿­ä»£ã€‚\n  \n\n"},"python/libclangä»£ç ç”Ÿæˆ":{"slug":"python/libclangä»£ç ç”Ÿæˆ","filePath":"python/libclangä»£ç ç”Ÿæˆ.md","title":"libclangä»£ç ç”Ÿæˆ","links":[],"tags":["Utils","Python"],"content":"å®‰è£…clangå·¥å…·é“¾\nsudo apt-get install clang-10 lldb-10 lld-10\npythonå®‰è£…ç›¸å…³åŒ…\npip install clang==10.0.1\nclang++ å‘½ä»¤ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘\n#æ‰“å°AST\nclang++ -Xclang -ast-dump -fsyntax-only ç›®æ ‡æ–‡ä»¶.h\n \n#å°†ASTä¿å­˜åˆ°äºŒè¿›åˆ¶æ–‡ä»¶(ç›®æ ‡æ–‡ä»¶.h.gch)\nclang++ -emit-ast ç›®æ ‡æ–‡ä»¶.h\nä¾‹ï¼š\n//å¾…è§£ææºæ–‡ä»¶\nclass Box\n{\n   public:\n      double length;   // é•¿åº¦\n      double breadth;  // å®½åº¦\n      double height;   // é«˜åº¦\n      // æˆå‘˜å‡½æ•°å£°æ˜\n      double get(void);\n      void set( double len, double bre, double hei );\n};\n// æˆå‘˜å‡½æ•°å®šä¹‰\ndouble Box::get(void)\n{\n    return length * breadth * height;\n}\n \nvoid Box::set( double len, double bre, double hei)\n{\n    length = len;\n    breadth = bre;\n    height = hei;\n}\n#ç”Ÿæˆä»£ç å¦‚ä¸‹\nTranslationUnitDecl 0x3a8f2048 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt;\n|-TypedefDecl 0x3a8f2920 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __int128_t &#039;__int128&#039;\n| `-BuiltinType 0x3a8f25e0 &#039;__int128&#039;\n|-TypedefDecl 0x3a8f2990 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __uint128_t &#039;unsigned __int128&#039;\n| `-BuiltinType 0x3a8f2600 &#039;unsigned __int128&#039;\n|-TypedefDecl 0x3a8f2d08 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __NSConstantString &#039;__NSConstantString_tag&#039;\n| `-RecordType 0x3a8f2a80 &#039;__NSConstantString_tag&#039;\n|   `-CXXRecord 0x3a8f29e8 &#039;__NSConstantString_tag&#039;\n|-TypedefDecl 0x3a8f2da0 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __builtin_ms_va_list &#039;char *&#039;\n| `-PointerType 0x3a8f2d60 &#039;char *&#039;\n|   `-BuiltinType 0x3a8f20e0 &#039;char&#039;\n|-TypedefDecl 0x3a930018 &lt;&lt;invalid sloc&gt;&gt; &lt;invalid sloc&gt; implicit __builtin_va_list &#039;__va_list_tag [1]&#039;\n| `-ConstantArrayType 0x3a92ffc0 &#039;__va_list_tag [1]&#039; 1 \n|   `-RecordType 0x3a8f2e90 &#039;__va_list_tag&#039;\n|     `-CXXRecord 0x3a8f2df8 &#039;__va_list_tag&#039;\n|-CXXRecordDecl 0x3a930070 &lt;../codegen/box.h:1:1, line:10:1&gt; line:1:7 class Box definition\n| |-DefinitionData pass_in_registers aggregate standard_layout trivially_copyable pod trivial literal\n| | |-DefaultConstructor exists trivial needs_implicit\n| | |-CopyConstructor simple trivial has_const_param needs_implicit implicit_has_const_param\n| | |-MoveConstructor exists simple trivial needs_implicit\n| | |-CopyAssignment trivial has_const_param needs_implicit implicit_has_const_param\n| | |-MoveAssignment exists simple trivial needs_implicit\n| | `-Destructor simple irrelevant trivial needs_implicit\n| |-CXXRecordDecl 0x3a930188 &lt;col:1, col:7&gt; col:7 implicit class Box\n| |-AccessSpecDecl 0x3a930218 &lt;line:3:4, col:10&gt; col:4 public\n| |-FieldDecl 0x3a930258 &lt;line:4:7, col:14&gt; col:14 referenced length &#039;double&#039;\n| |-FieldDecl 0x3a9302c0 &lt;line:5:7, col:14&gt; col:14 referenced breadth &#039;double&#039;\n| |-FieldDecl 0x3a930328 &lt;line:6:7, col:14&gt; col:14 referenced height &#039;double&#039;\n| |-CXXMethodDecl 0x3a930470 &lt;line:8:7, col:22&gt; col:14 get &#039;double ()&#039;\n| `-CXXMethodDecl 0x3a930708 &lt;line:9:7, col:52&gt; col:12 set &#039;void (double, double, double)&#039;\n|   |-ParmVarDecl 0x3a930528 &lt;col:17, col:24&gt; col:24 len &#039;double&#039;\n|   |-ParmVarDecl 0x3a9305a8 &lt;col:29, col:36&gt; col:36 bre &#039;double&#039;\n|   `-ParmVarDecl 0x3a930628 &lt;col:41, col:48&gt; col:48 hei &#039;double&#039;\n|-CXXMethodDecl 0x3a930898 parent 0x3a930070 prev 0x3a930470 &lt;line:12:1, line:15:1&gt; line:12:13 get &#039;double ()&#039;\n| `-CompoundStmt 0x3a930ae0 &lt;line:13:1, line:15:1&gt;\n|   `-ReturnStmt 0x3a930ad0 &lt;line:14:5, col:31&gt;\n|     `-BinaryOperator 0x3a930ab0 &lt;col:12, col:31&gt; &#039;double&#039; &#039;*&#039;\n|       |-BinaryOperator 0x3a930a38 &lt;col:12, col:21&gt; &#039;double&#039; &#039;*&#039;\n|       | |-ImplicitCastExpr 0x3a930a08 &lt;col:12&gt; &#039;double&#039; &lt;LValueToRValue&gt;\n|       | | `-MemberExpr 0x3a930998 &lt;col:12&gt; &#039;double&#039; lvalue -&gt;length 0x3a930258\n|       | |   `-CXXThisExpr 0x3a930988 &lt;col:12&gt; &#039;Box *&#039; implicit this\n|       | `-ImplicitCastExpr 0x3a930a20 &lt;col:21&gt; &#039;double&#039; &lt;LValueToRValue&gt;\n|       |   `-MemberExpr 0x3a9309d8 &lt;col:21&gt; &#039;double&#039; lvalue -&gt;breadth 0x3a9302c0\n|       |     `-CXXThisExpr 0x3a9309c8 &lt;col:21&gt; &#039;Box *&#039; implicit this\n|       `-ImplicitCastExpr 0x3a930a98 &lt;col:31&gt; &#039;double&#039; &lt;LValueToRValue&gt;\n|         `-MemberExpr 0x3a930a68 &lt;col:31&gt; &#039;double&#039; lvalue -&gt;height 0x3a930328\n|           `-CXXThisExpr 0x3a930a58 &lt;col:31&gt; &#039;Box *&#039; implicit this\n`-CXXMethodDecl 0x3a930cb8 parent 0x3a930070 prev 0x3a930708 &lt;line:17:1, line:22:1&gt; line:17:11 set &#039;void (double, double, double)&#039;\n  |-ParmVarDecl 0x3a930b18 &lt;col:16, col:23&gt; col:23 used len &#039;double&#039;\n  |-ParmVarDecl 0x3a930b98 &lt;col:28, col:35&gt; col:35 used bre &#039;double&#039;\n  |-ParmVarDecl 0x3a930c18 &lt;col:40, col:47&gt; col:47 used hei &#039;double&#039;\n  `-CompoundStmt 0x3a95e1c8 &lt;line:18:1, line:22:1&gt;\n    |-BinaryOperator 0x3a930e38 &lt;line:19:5, col:14&gt; &#039;double&#039; lvalue &#039;=&#039;\n    | |-MemberExpr 0x3a930dd0 &lt;col:5&gt; &#039;double&#039; lvalue -&gt;length 0x3a930258\n    | | `-CXXThisExpr 0x3a930dc0 &lt;col:5&gt; &#039;Box *&#039; implicit this\n    | `-ImplicitCastExpr 0x3a930e20 &lt;col:14&gt; &#039;double&#039; &lt;LValueToRValue&gt;\n    |   `-DeclRefExpr 0x3a930e00 &lt;col:14&gt; &#039;double&#039; lvalue ParmVar 0x3a930b18 &#039;len&#039; &#039;double&#039;\n    |-BinaryOperator 0x3a930ed0 &lt;line:20:5, col:15&gt; &#039;double&#039; lvalue &#039;=&#039;\n    | |-MemberExpr 0x3a930e68 &lt;col:5&gt; &#039;double&#039; lvalue -&gt;breadth 0x3a9302c0\n    | | `-CXXThisExpr 0x3a930e58 &lt;col:5&gt; &#039;Box *&#039; implicit this\n    | `-ImplicitCastExpr 0x3a930eb8 &lt;col:15&gt; &#039;double&#039; &lt;LValueToRValue&gt;\n    |   `-DeclRefExpr 0x3a930e98 &lt;col:15&gt; &#039;double&#039; lvalue ParmVar 0x3a930b98 &#039;bre&#039; &#039;double&#039;\n    `-BinaryOperator 0x3a95e1a8 &lt;line:21:5, col:14&gt; &#039;double&#039; lvalue &#039;=&#039;\n      |-MemberExpr 0x3a95e140 &lt;col:5&gt; &#039;double&#039; lvalue -&gt;height 0x3a930328\n      | `-CXXThisExpr 0x3a930ef0 &lt;col:5&gt; &#039;Box *&#039; implicit this\n      `-ImplicitCastExpr 0x3a95e190 &lt;col:14&gt; &#039;double&#039; &lt;LValueToRValue&gt;\n        `-DeclRefExpr 0x3a95e170 &lt;col:14&gt; &#039;double&#039; lvalue ParmVar 0x3a930c18 &#039;hei&#039; &#039;double&#039;"},"python/pythonæ‰“åŒ…":{"slug":"python/pythonæ‰“åŒ…","filePath":"python/pythonæ‰“åŒ….md","title":"pythonæ‰“åŒ…","links":[],"tags":["Python","Utils"],"content":"å®‰è£…pyinstallerå·¥å…·\npip install pyinstaller==6.2.0\n#è£…åˆ«çš„ç‰ˆæœ¬,æ‰“åŒ…å¸¦--noconsoleä¼šæŠ¥é”™ \n#(225, &#039;&#039;, &#039;æ— æ³•æˆåŠŸå®Œæˆæ“ä½œï¼Œå› ä¸ºæ–‡ä»¶åŒ…å«ç—…æ¯’æˆ–æ½œåœ¨çš„åƒåœ¾è½¯ä»¶ã€‚&#039;) \næ‰“åŒ…å•pythonæ–‡ä»¶åŠ é…ç½®æ–‡ä»¶\npyinstaller --onefile --add-data &quot;config.ini;.&quot; DbxController.py --noconsole\n#--noconsole æ‰“åŒ…åä¸ä¼šæœ‰ç»ˆç«¯çª—å£"},"tools/C++ç¨‹åºå†…å­˜æ³„æ¼åŠæ€§èƒ½æ£€æµ‹":{"slug":"tools/C++ç¨‹åºå†…å­˜æ³„æ¼åŠæ€§èƒ½æ£€æµ‹","filePath":"tools/C++ç¨‹åºå†…å­˜æ³„æ¼åŠæ€§èƒ½æ£€æµ‹.md","title":"C++ç¨‹åºå†…å­˜æ³„æ¼åŠæ€§èƒ½æ£€æµ‹","links":[],"tags":["Utils","CPP"],"content":"ä¸€ã€å®‰è£…\n#å®‰è£… valgrind\nsudo apt-get install valgrind  # Debian/Ubuntu\nsudo yum install valgrind      # CentOS/Fedora\n#å®‰è£… massif-visualizer\nsudo apt install massif-visualizer\näºŒã€æ£€æµ‹å†…å­˜æ³„æ¼\n1.åŸºæœ¬ä»‹ç»\n\n\nï¼ˆ1ï¼‰Memcheckã€‚è¿™æ˜¯valgrindåº”ç”¨æœ€å¹¿æ³›çš„å·¥å…·ï¼Œä¸€ä¸ªé‡é‡çº§çš„å†…å­˜æ£€æŸ¥å™¨ï¼Œèƒ½å¤Ÿå‘ç°å¼€å‘ä¸­ç»å¤§å¤šæ•°å†…å­˜é”™è¯¯ä½¿ç”¨æƒ…å†µï¼Œæ¯”å¦‚ï¼šä½¿ç”¨æœªåˆå§‹åŒ–çš„å†…å­˜ï¼Œä½¿ç”¨å·²ç»é‡Šæ”¾äº†çš„å†…å­˜ï¼Œå†…å­˜è®¿é—®è¶Šç•Œç­‰ã€‚è¿™ä¹Ÿæ˜¯æœ¬æ–‡å°†é‡ç‚¹ä»‹ç»çš„éƒ¨åˆ†ã€‚\nï¼ˆ2ï¼‰Callgrindã€‚å®ƒä¸»è¦ç”¨æ¥æ£€æŸ¥ç¨‹åºä¸­å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜ã€‚\nï¼ˆ3ï¼‰Cachegrindã€‚å®ƒä¸»è¦ç”¨æ¥æ£€æŸ¥ç¨‹åºä¸­ç¼“å­˜ä½¿ç”¨å‡ºç°çš„é—®é¢˜ã€‚\nï¼ˆ4ï¼‰Helgrindã€‚å®ƒä¸»è¦ç”¨æ¥æ£€æŸ¥å¤šçº¿ç¨‹ç¨‹åºä¸­å‡ºç°çš„ç«äº‰é—®é¢˜ã€‚\nï¼ˆ5ï¼‰Massifã€‚å®ƒä¸»è¦ç”¨æ¥æ£€æŸ¥ç¨‹åºä¸­å †æ ˆä½¿ç”¨ä¸­å‡ºç°çš„é—®é¢˜ã€‚\nï¼ˆ6ï¼‰Extensionã€‚å¯ä»¥åˆ©ç”¨coreæä¾›çš„åŠŸèƒ½ï¼Œè‡ªå·±ç¼–å†™ç‰¹å®šçš„å†…å­˜è°ƒè¯•å·¥å…·\nï¼ˆ7ï¼‰å…¶ä»– valgrindæ’ä»¶ç”¨æ³•: valgrindæ’ä»¶ç”¨æ³•\n\n\n2.ä½¿ç”¨valgrind\nvalgrind --leak-check=full --show-leak-kinds=all --track-origins=yes xxx args ...\nè¿›ç¨‹é€€å‡ºåï¼Œä¼šç”Ÿæˆæ—¥å¿—ä¿¡æ¯ï¼Œå¯æŸ¥çœ‹å†…å­˜æ³„æ¼æƒ…å†µåŠæ³„æ¼ä½ç½®\n3.ä½¿ç”¨valgrind+massif\n# ç”Ÿæˆmassif.out.xxxæ–‡ä»¶\nvalgrind --tool=massif xxx args ...\n#ä½¿ç”¨massif-visualizeræŸ¥çœ‹è¿›ç¨‹å†…å­˜å¢é•¿\nmassif-visualizer massif.out.12345\n#æˆ– \nms_print massif.out.12345 \n\n4.ä¸ºä½•éœ€è¦ä¸¤ç§æ–¹å¼æ£€æµ‹ï¼Ÿ\n\n\nç¬¬ä¸€ç§æ–¹å¼ï¼Œè¿›ç¨‹è°ƒç”¨æŸåº“å‡½æ•°åˆ†é…å†…å­˜ä¸é‡Šæ”¾ï¼Œ ä½†æ˜¯åœ¨è¿›ç¨‹é€€å‡ºæ—¶ï¼Œç»Ÿä¸€é‡Šæ”¾å†…å­˜ï¼Œvalgrind æ£€æŸ¥ä¸å‡ºæ¥\nç¬¬äºŒç§æ–¹å¼ï¼Œä½¿ç”¨massifå·¥å…·è¿›è¡Œå…¨è¿‡ç¨‹æ£€æµ‹ï¼Œå¯æœ‰æ•ˆè·Ÿè¸ªæœåŠ¡å†…å­˜ä¸æ–­å¢é•¿çš„æƒ…å†µ\n\n"},"äº‘è®¡ç®—/DevOps/GitLabã€Jenkinséƒ¨ç½²ä¸CICDæ­å»º":{"slug":"äº‘è®¡ç®—/DevOps/GitLabã€Jenkinséƒ¨ç½²ä¸CICDæ­å»º","filePath":"äº‘è®¡ç®—/DevOps/GitLabã€Jenkinséƒ¨ç½²ä¸CICDæ­å»º.md","title":"GitLabã€Jenkinséƒ¨ç½²ä¸CICDæ­å»º","links":["Linuxç³»ç»Ÿé…ç½®ä¸è°ƒä¼˜/CentOS7.9-å‘½ä»¤æ‚é¡¹"],"tags":["äº‘åŸç”Ÿ","Docker"],"content":"\nä¸€ã€ç®€ä»‹\né…ç½®ç¯å¢ƒå¦‚ä¸‹ï¼š\nç³»ç»Ÿé—®é¢˜ã€ä»£ç†é…ç½®ç­‰è¯·å‚è€ƒCentOS7.9 å‘½ä»¤æ‚é¡¹\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nç³»ç»ŸåŠè½¯ä»¶ç¯å¢ƒç‰ˆæœ¬CentOS7.9Docker20ä»¥ä¸Šçš„ç‰ˆæœ¬å³å¯GitLabé•œåƒgitlab/gitlab-ce:16.1.0-ce.0Jenkinsé•œåƒjenkins/jenkins:lts\n\näºŒã€GitLabéƒ¨ç½²é…ç½®\n1. è¿è¡ŒGitLabå®¹å™¨\n\n\n                  \n                  NOTICE\n                  \n                \n\n\n1ï¼‰â€”privileged è‹¥è¿è¡Œæ—¶Gitlabå®¹å™¨ä¸€ç›´é‡å¯ï¼Œæ·»åŠ å¯è§£å†³\n2ï¼‰8080:80  å¤–éƒ¨httpè®¿é—®ç«¯å£å˜ä¸º8080ï¼Œ2222:22 å¤–éƒ¨sshè®¿é—®ç«¯å£å˜ä¸º2222\n3ï¼‰å°†æŒä¹…åŒ–æ–‡ä»¶è·¯å¾„æŒ‚è½½å‡ºæ¥ï¼ˆä½ ä¹Ÿä¸æƒ³ä»£ç ä»“åº“éšç€å®¹å™¨ä¸€èµ·æ¶ˆå¤±å§ ğŸ˜°ï¼‰\n\n\n\ndocker run -d \\\n\t--privileged  --hostname localhost \\\n\t-p 8080:80  -p 2222:22  --name gitlab \\\n\t--restart always   \\\n\t-v /opt/gitlab/config:/etc/gitlab   \\\n\t-v /opt/gitlab/logs:/var/log/gitlab   \\\n\t-v /opt/gitlab/data:/var/opt/gitlab   \\\n\tgitlab/gitlab-ce:16.1.0-ce.0\n2. ä¿®æ”¹GitLabå®¹å™¨å†…éƒ¨é…ç½®\n\nè¿›å…¥å®¹å™¨å†…éƒ¨ï¼š\n\ndocker exec -it gitlab bash\n\nä¿®æ”¹æ–‡ä»¶ï¼š\n\nvi /etc/gitlab/gitlab.rb\n\næ·»åŠ å¦‚ä¸‹é…ç½®é¡¹ï¼š\n\ngitlab_rails[&#039;gitlab_shell_ssh_port&#039;] = å¤–éƒ¨sshè®¿é—®ç«¯å£                 \nexternal_url &#039;http://å®¿ä¸»æœºæˆ–å…¬ç½‘ip:å¤–éƒ¨httpè®¿é—®ç«¯å£&#039;                    \nnginx[&#039;listen_port&#039;] = å®¹å™¨å†…gitlabæœåŠ¡ç«¯å£\n \nä¾‹å­:\ngitlab_rails[&#039;gitlab_shell_ssh_port&#039;] = 2222                     \nexternal_url &#039;http://192.168.137.11:8080&#039;                          \nnginx[&#039;listen_port&#039;] = 80\n\n\n                  \n                  WARNING\n                  \n                \n\n\nä»¥ä¸Šipå’Œporté…ç½®æ˜¯ä¸è¿è¡Œå®¹å™¨æ—¶çš„é…ç½®ç›¸å…³\n\\qquad 1.è‹¥ä¸ºæ›´æ”¹httpå’Œsshç«¯å£ï¼Œåˆ™æ— éœ€æ›´æ”¹ã€‚å…¶ä¸­ä¿®æ”¹gitlab_railsä¸external_urlï¼Œåœ¨å¤åˆ¶gitä»“åº“çš„cloneåœ°å€æ—¶ï¼Œç›´æ¥ç›¸å…³ï¼Œå½“å¤åˆ¶cloneåœ°å€æ—¶ï¼Œåˆ™ä¼šå˜ä¸º\nssh://git@å¤–éƒ¨ip:å¤–éƒ¨sshç«¯å£/ç”¨æˆ·/é¡¹ç›®.git å’Œ\nhttp://å¤–éƒ¨ip:å¤–éƒ¨httpç«¯å£/ç”¨æˆ·/é¡¹ç›®.git\n\\qquad 2.å¦‚æœæ›´æ”¹äº†å¤–éƒ¨httpç«¯å£ï¼Œexternal_url â€˜http://192.168.137.11:8080â€™ é…ç½®é¡¹æ”¹æˆå¸¦ç«¯å£çš„ï¼Œæ”¹æˆé80ç«¯å£ï¼Œåˆ™å¿…é¡»æ·»åŠ  nginx[â€˜listen_portâ€™] = 80 ï¼Œå› ä¸ºexternal_urlå¸¦ç«¯å£åˆ™ä¼šè®©å®¹å™¨å†…çš„nginxç›‘å¬æ”¹çš„ç«¯å£ï¼Œä½†è¿è¡Œå®¹å™¨æ—¶æ˜¯ -p 8080:80ï¼Œåˆ™å¤–éƒ¨ä¸€å®šè®¿é—®ä¸åˆ°GitlabæœåŠ¡\n\\qquad 3.nginx[â€˜listen_portâ€™] æ­¤é¡¹åœ¨æ›´æ”¹å¤–éƒ¨httpç«¯å£æ—¶ï¼Œå¿…é¡»æ·»åŠ ï¼Œå¦åˆ™å¤–éƒ¨è®¿é—®ä¸åˆ°GitlabæœåŠ¡\n\n\n\n//ä¿®æ”¹å¦ä¸€é…ç½® ï¼ˆé¡ºä¾¿ä¿®æ”¹ä¸‹å§ï¼‰\nvi /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml\n//sshå¤–éƒ¨ç«¯å£\nssh_port: 2222\n\né…ç½®ç”Ÿæ•ˆã€é‡å¯GitlabæœåŠ¡\n\n//åœ¨å®¹å™¨å†… é‡æ–°ç”Ÿæˆé…ç½®\ngitlab-ctl reconfigure\n//é‡å¯æœåŠ¡\ngitlab-ctl restart\n\næ­¤æ—¶å¤–éƒ¨ç½‘é¡µhttp://ip:portèƒ½å¤Ÿè®¿é—®åˆ°GitlabæœåŠ¡äº†\n\n3. é…ç½®ç®¡ç†å‘˜ç”¨æˆ·\n\nè¿›å…¥å®¹å™¨å†…éƒ¨\n\ncd /opt/gitlab/bin\ngitlab-rails console //ç­‰å¾…åˆå§‹åŒ–å¯†ç \n\nç»ˆç«¯è¾“å…¥ï¼ŒæŸ¥æ‰¾ç®¡ç†å‘˜ç”¨æˆ·\n\nu=User.where(id:1).first\n//å¯ä»¥æŸ¥çœ‹åˆ°ç®¡ç†å‘˜ç”¨æˆ·åï¼Œä¸€èˆ¬ä¸ºroot\n\nè®¾ç½®ç®¡ç†å‘˜å¯†ç \n\nu.password=&#039;xxxxxxxxx&#039;\n\nç¡®è®¤å¯†ç \n\nu.password_confirmation=&#039;xxxxxxxxx&#039;\n\nä¿å­˜ä¿®æ”¹\n\nu.save!\n4. åˆ›å»ºæ–°ç”¨æˆ·ä¸é¡¹ç›®ä»“åº“\n\næ³¨å†Œæ–°ç”¨æˆ·ï¼Œä½¿ç”¨ç®¡ç†å‘˜è®¤è¯é€šè¿‡\nåˆ›å»ºä»£ç ä»“åº“\næœ¬åœ°ä¸gitä»“åº“å…³è”\nåˆ›å»ºsshå…¬é’¥ç§é’¥\n\nssh-keygen -o -t rsa -b 2048 -C &quot;email@example.com&quot;\n\nå°†ç”Ÿæˆçš„id_rsa.pubå¤åˆ¶åˆ°ä»£ç ä»“åº“çš„SSH Keysä¸Š\n\n\n\n                  \n                  WARNING\n                  \n                \n\n\n\\qquadå¦‚æœGitlabä¸Jenkinséƒ¨ç½²åœ¨å†…ç½‘ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨ç®¡ç†å‘˜é…ç½®å‡ºç«™è¯·æ±‚\n\\qquadæ­¥éª¤å¦‚ä¸‹(ç®¡ç†å‘˜ç™»å½•)ï¼š\nAdmin area â†’ Setting â†’ Network â†’ Outbound requests\nå‹¾é€‰å…è®¸webhookå‡ºç«™åˆ°å†…ç½‘åœ°å€\n\n\n\n\nä¸‰ã€Jenkinséƒ¨ç½²ä¸é…ç½®\n1.è¿è¡ŒJenkinså®¹å™¨\ndocker run -d --name=jenkins \\\n-p 8080:8080 \\\n-u root \\\n--restart always \\ n\n-v /var/run/docker.sock:/var/run/docker.sock \\\n-v /usr/bin/docker:/usr/bin/docker \\\n-v /opt/jenkins_home:/var/jenkins_home \\\njenkins/jenkins:lts\n2.é…ç½®Jenkins\n2.1è·å–ç®¡ç†å‘˜å¯†ç ï¼Œç½‘é¡µè®¿é—®å¹¶è¾“å…¥å¯†ç è§£é”Jenkins\ncat /opt/jenkins_home/secrets/initialAdminPassword\næˆ–è€…è¿›å…¥å®¹å™¨\ncat /var/jenkins_home/secrets/initialAdminPassword\n2.2 å®‰è£…æ’ä»¶\n1ï¼‰ç›´æ¥é€‰å®‰è£…æ¨èæ’ä»¶ï¼Œç­‰å¾…å®‰è£…å®Œæ¯•\n2ï¼‰åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ· admin\n3ï¼‰å®‰è£…å…¶ä»–æ’ä»¶\nç³»ç»Ÿç®¡ç† â†’ æ’ä»¶ç®¡ç† â†’ å¯é€‰æ’ä»¶æœç´¢æ¡†ï¼Œæœç´¢å¹¶å®‰è£…ä»¥ä¸‹æ’ä»¶ï¼š\n\nGitlab   Gitlab API\nDocker\nPublish Over SSH\n\n2.3åˆ›å»ºJenkinsä»»åŠ¡\n2.3.1 åˆ›å»ºfreestyleé¡¹ç›®\nè¾“å…¥é¡¹ç›®åç§°xxxï¼Œé€‰æ‹©freestyleé¡¹ç›®ã€‚åå­—æœ€å¥½èƒ½ä¸Gitlabçš„é¡¹ç›®å¯¹åº”\n2.3.2 é…ç½®freestyleé¡¹ç›®\n2.3.2.1 é…ç½®æºç ç®¡ç†\næºç ç®¡ç†é€‰æ‹©Git\n\\qquadRepository URLï¼šæ­¤å¤„å¯ä»¥å¡«å…¥Gitlabé¡¹ç›®çš„sshæˆ–è€…httpä¸¤ç§åœ°å€åŒºåˆ«ä¸º\n\\qquad 1ï¼‰å¡«å…¥httpåœ°å€ï¼Œåˆ™Jenkinså‡­è¯é€‰æ‹©Gitlabåˆ›å»ºé¡¹ç›®çš„ç”¨æˆ·æˆ–æœ‰æƒé™æäº¤çš„ç”¨æˆ·å’Œå…¶å¯†ç è¿æ¥Github\n\\qquad 2ï¼‰å¡«å…¥sshåœ°å€ï¼Œåˆ™åœ¨Jenkinså‡­è¯ä¸­ç”¨æˆ·å¡«å…¥gitï¼Œç§é’¥é€‰æ‹©ä¸Gitlabé¡¹ç›®é…å¯¹çš„ç§é’¥ï¼Œä¸”éœ€è¦åœ¨å®¹å™¨å†…ä½¿ç”¨ç§é’¥è¿æ¥ä¸€æ¬¡åï¼Œæ·»åŠ ç›®æ ‡æœåŠ¡å™¨çš„æŒ‡çº¹åˆ°known_hostsæ–‡ä»¶ä¸­ï¼Œç½‘é¡µé…ç½®ç”Ÿæ•ˆã€‚\n\\qquadç§é’¥æŒ‚è½½æˆ–å¤åˆ¶è¿›å®¹å™¨ï¼Œè¿›å…¥å®¹å™¨æ‰§è¡Œåï¼Œå¯æ·»åŠ ç›®æ ‡æœåŠ¡å™¨çš„æŒ‡çº¹åˆ°known_hostsæ–‡ä»¶ï¼š\nssh -i /path/to/private_key -p 2222 gitå½¢å¼çš„é¡¹ç›®åœ°å€\n2.3.2.2 é…ç½®è§¦å‘å™¨\n\nå‹¾é€‰Build when a change is pushed to GitLab â€¦ åŒæ—¶è®°å¾— GitLab webhook URL\nä¸‹ç¿»ç‚¹å‡»Generateï¼Œç”Ÿæˆtoken\nåˆ‡åˆ°Gitlabï¼Œåœ¨é¡¹ç›®ä¸­Setting â†’ Webhooksï¼Œå¡«å…¥ä¸Šè¿°URLå’Œtokenï¼Œå‹¾é€‰é€‚å½“çš„è§¦å‘æ¡ä»¶(Push eventsç­‰)ï¼Œä¸‹æ‹‰æœ€åç‚¹å‡»ç¡®å®šï¼Œç”Ÿæˆwebhooksï¼Œç‚¹å‡»editåï¼Œèƒ½çœ‹åˆ°å†å²è§¦å‘çš„è¯¦ç»†ä¿¡æ¯ã€‚ç‚¹å‡»testï¼Œå¯ä»¥å‘é€å¯¹åº”çš„è§¦å‘äº‹ä»¶ï¼Œç”¨æ¥æ‰‹åŠ¨æµ‹è¯•è”é€šJenkinsçš„æµæ°´çº¿æˆ–å…¶ä»–ä»»åŠ¡\n\n2.3.2.3 é…ç½®æ„å»º\n\\qquadè¿™é‡Œä¸»è¦æ˜¯é…ç½®C++/CMakeæ„å»ºé¡¹ç›®ã€‚æ‰€ä»¥ build step å‹¾é€‰ æ‰§è¡Œshell\nè¾“å…¥å¦‚ä¸‹ï¼š\n#!/bin/bash\nset -ex\n \nHOST_PATH=&quot;/opt/jenkins_home/workspace/hello&quot;\n \ndocker run --rm \\\n  -v &quot;$HOST_PATH&quot;:/build \\\n  -w /build \\\n  cpp-build-image:v1 bash ./build.sh\n\\qquadæœ¬åœ°è‡ªè¡Œå‡†å¤‡å¥½ç¼–è¯‘ç¯å¢ƒçš„é•œåƒï¼Œå¦å¤–æ­¤å¤„æ˜¯Jenkinså®¹å™¨æŒ‚è½½ç›®å½•/opt/jenkins_home:/var/jenkins_homeï¼Œç›¸åº”çš„Jenkinsæ‹‰å–çš„Gitlabé¡¹ç›®ä¼šåœ¨å®¹å™¨å†…çš„/var/jenkins_home/workspace/é¡¹ç›®å ï¼Œä¹Ÿå°±æ˜¯å®¿ä¸»æœºçš„/opt/jenkins_home/workspace/é¡¹ç›®åï¼Œé€‰æ‹©è¿è¡Œç¼–è¯‘å®¹å™¨æ—¶ï¼Œå°†Gitlabé¡¹ç›®ç›®å½•ç”±å®¿ä¸»æœºæŒ‚è½½è¿›ç¼–è¯‘å®¹å™¨ï¼Œä¸”å·¥ä½œç›®å½•è¿›å…¥é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ­¤å¤„éœ€å¼€å‘äººå‘˜å°†æ„å»ºå‘½ä»¤è‡ªè¡Œå‡†å¤‡å¥½ï¼Œä¸”éšé¡¹ç›®ä¸€åŒæäº¤è¿›Gitlabã€‚æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å®Œæˆçš„å¯æ‰§è¡Œæ–‡ä»¶å’Œåº“éƒ½ä¼šåœ¨å®¿ä¸»æœºçš„/opt/jenkins_home/workspace/é¡¹ç›®å ç›®å½•ä¸‹ï¼Œå–å†³äº build.shçš„æ„å»ºç»†èŠ‚ã€‚åç»­å¯å°†æ„å»ºçš„äº§ç‰©ç»§ç»­æ‰“åŒ…æˆ–ä¸Šä¼ \n\n\n                  \n                  Jenkinsçš„æ„å»ºæ­¥éª¤é‡Œï¼Œbuild stepå¯ä»¥æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œå› æ­¤å¯ä»¥æ‹†åˆ†å¤šæ­¥ï¼Œä¹Ÿå¯ä»¥ä¸€æ­¥æ„å»ºå®Œï¼Œç„¶åä½¿ç”¨docker buildæ‰“åŒ… \n                  \n                \n\n\n\n                  \n                  build stepæ¯”è¾ƒè‡ªç”±ï¼Œä¸»è¦æœåŠ¡äºæœ€ç»ˆçš„ç›®çš„ï¼Œèƒ½è¾¾æˆç›®çš„å³å¯ \n                  \n                \n\n\nå››ã€ å®Œæˆæ•´ä¸ªCI/CD\n\\qquadé…ç½®æ­¥éª¤èµ°åˆ°è¿™é‡Œï¼Œå·²ç»å®Œæˆäº†CIçš„å…¨éƒ¨å†…å®¹äº†\n\næ­¤æ—¶å¯ä»¥æµ‹è¯•ï¼Œé€šè¿‡Gitlabé¡¹ç›®çš„Setting â†’ WebHooks â†’ ä¸‹é¢é…ç½®å¥½çš„triggerï¼Œç‚¹å‡»testï¼Œè§¦å‘ç›¸åº”çš„äº‹ä»¶ï¼Œå¯ä»¥çœ‹Jenkinsçš„ä»»åŠ¡æ˜¯å¦è§¦å‘ï¼Œæ˜¯å¦æ‰§è¡ŒæˆåŠŸ\ngitæäº¤ä»£ç è§¦å‘æ•´å¥—æµç¨‹\n"},"äº‘è®¡ç®—/DevOps/Gitlabå®¹å™¨éƒ¨ç½²é…ç½®":{"slug":"äº‘è®¡ç®—/DevOps/Gitlabå®¹å™¨éƒ¨ç½²é…ç½®","filePath":"äº‘è®¡ç®—/DevOps/Gitlabå®¹å™¨éƒ¨ç½²é…ç½®.md","title":"Gitlabå®¹å™¨éƒ¨ç½²é…ç½®","links":["Linuxç³»ç»Ÿé…ç½®ä¸è°ƒä¼˜/CentOS7.9-å‘½ä»¤æ‚é¡¹"],"tags":["äº‘åŸç”Ÿ","Docker","CICD"],"content":"\nä¸€ã€ç®€ä»‹\né…ç½®ç¯å¢ƒå¦‚ä¸‹ï¼š\nç³»ç»Ÿé—®é¢˜ã€ä»£ç†é…ç½®ç­‰è¯·å‚è€ƒCentOS7.9 å‘½ä»¤æ‚é¡¹\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nç³»ç»ŸåŠè½¯ä»¶ç¯å¢ƒç‰ˆæœ¬CentOS7.9Docker20ä»¥ä¸Šçš„ç‰ˆæœ¬å³å¯GitLabé•œåƒgitlab/gitlab-ce:16.1.0-ce.0\n\näºŒã€GitLabéƒ¨ç½²é…ç½®\n1. è¿è¡ŒGitLabå®¹å™¨\n\n\n                  \n                  NOTICE\n                  \n                \n\n\n1ï¼‰â€”privileged è‹¥è¿è¡Œæ—¶Gitlabå®¹å™¨ä¸€ç›´é‡å¯ï¼Œæ·»åŠ å¯è§£å†³\n2ï¼‰8080:80  å¤–éƒ¨httpè®¿é—®ç«¯å£å˜ä¸º8080ï¼Œ2222:22 å¤–éƒ¨sshè®¿é—®ç«¯å£å˜ä¸º2222\n3ï¼‰å°†æŒä¹…åŒ–æ–‡ä»¶è·¯å¾„æŒ‚è½½å‡ºæ¥ï¼ˆä½ ä¹Ÿä¸æƒ³ä»£ç ä»“åº“éšç€å®¹å™¨ä¸€èµ·æ¶ˆå¤±å§ ğŸ˜°ï¼‰\n\n\n\ndocker run -d \\\n\t--privileged  --hostname localhost \\\n\t-p 8080:80  -p 2222:22  --name gitlab \\\n\t--restart always   \\\n\t-v /opt/gitlab/config:/etc/gitlab   \\\n\t-v /opt/gitlab/logs:/var/log/gitlab   \\\n\t-v /opt/gitlab/data:/var/opt/gitlab   \\\n\tgitlab/gitlab-ce:16.1.0-ce.0\n2. ä¿®æ”¹GitLabå®¹å™¨å†…éƒ¨é…ç½®\n\nè¿›å…¥å®¹å™¨å†…éƒ¨ï¼š\n\ndocker exec -it gitlab bash\n\nä¿®æ”¹æ–‡ä»¶ï¼š\n\nvi /etc/gitlab/gitlab.rb\n\næ·»åŠ å¦‚ä¸‹é…ç½®é¡¹ï¼š\n\ngitlab_rails[&#039;gitlab_shell_ssh_port&#039;] = å¤–éƒ¨sshè®¿é—®ç«¯å£                 \nexternal_url &#039;http://å®¿ä¸»æœºæˆ–å…¬ç½‘ip:å¤–éƒ¨httpè®¿é—®ç«¯å£&#039;                    \nnginx[&#039;listen_port&#039;] = å®¹å™¨å†…gitlabæœåŠ¡ç«¯å£\n \nä¾‹å­:\ngitlab_rails[&#039;gitlab_shell_ssh_port&#039;] = 2222                     \nexternal_url &#039;http://192.168.137.11:8080&#039;                          \nnginx[&#039;listen_port&#039;] = 80\n\n\n                  \n                  WARNING\n                  \n                \n\n\nä»¥ä¸Šipå’Œporté…ç½®æ˜¯ä¸è¿è¡Œå®¹å™¨æ—¶çš„é…ç½®ç›¸å…³\n\\qquad 1.è‹¥ä¸ºæ›´æ”¹httpå’Œsshç«¯å£ï¼Œåˆ™æ— éœ€æ›´æ”¹ã€‚å…¶ä¸­ä¿®æ”¹gitlab_railsä¸external_urlï¼Œåœ¨å¤åˆ¶gitä»“åº“çš„cloneåœ°å€æ—¶ï¼Œç›´æ¥ç›¸å…³ï¼Œå½“å¤åˆ¶cloneåœ°å€æ—¶ï¼Œåˆ™ä¼šå˜ä¸º\nssh://git@å¤–éƒ¨ip:å¤–éƒ¨sshç«¯å£/ç”¨æˆ·/é¡¹ç›®.git å’Œ\nhttp://å¤–éƒ¨ip:å¤–éƒ¨httpç«¯å£/ç”¨æˆ·/é¡¹ç›®.git\n\\qquad 2.å¦‚æœæ›´æ”¹äº†å¤–éƒ¨httpç«¯å£ï¼Œexternal_url â€˜http://192.168.137.11:8080â€™ é…ç½®é¡¹æ”¹æˆå¸¦ç«¯å£çš„ï¼Œæ”¹æˆé80ç«¯å£ï¼Œåˆ™å¿…é¡»æ·»åŠ  nginx[â€˜listen_portâ€™] = 80 ï¼Œå› ä¸ºexternal_urlå¸¦ç«¯å£åˆ™ä¼šè®©å®¹å™¨å†…çš„nginxç›‘å¬æ”¹çš„ç«¯å£ï¼Œä½†è¿è¡Œå®¹å™¨æ—¶æ˜¯ -p 8080:80ï¼Œåˆ™å¤–éƒ¨ä¸€å®šè®¿é—®ä¸åˆ°GitlabæœåŠ¡\n\\qquad 3.nginx[â€˜listen_portâ€™] æ­¤é¡¹åœ¨æ›´æ”¹å¤–éƒ¨httpç«¯å£æ—¶ï¼Œå¿…é¡»æ·»åŠ ï¼Œå¦åˆ™å¤–éƒ¨è®¿é—®ä¸åˆ°GitlabæœåŠ¡\n\n\n\n//ä¿®æ”¹å¦ä¸€é…ç½® ï¼ˆé¡ºä¾¿ä¿®æ”¹ä¸‹å§ï¼‰\nvi /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml\n//sshå¤–éƒ¨ç«¯å£\nssh_port: 2222\n\né…ç½®ç”Ÿæ•ˆã€é‡å¯GitlabæœåŠ¡\n\n//åœ¨å®¹å™¨å†… é‡æ–°ç”Ÿæˆé…ç½®\ngitlab-ctl reconfigure\n//é‡å¯æœåŠ¡\ngitlab-ctl restart\n\næ­¤æ—¶å¤–éƒ¨ç½‘é¡µhttp://ip:portèƒ½å¤Ÿè®¿é—®åˆ°GitlabæœåŠ¡äº†\n\n3. é…ç½®ç®¡ç†å‘˜ç”¨æˆ·\n\nè¿›å…¥å®¹å™¨å†…éƒ¨\n\ncd /opt/gitlab/bin\ngitlab-rails console //ç­‰å¾…åˆå§‹åŒ–å¯†ç \n\nç»ˆç«¯è¾“å…¥ï¼ŒæŸ¥æ‰¾ç®¡ç†å‘˜ç”¨æˆ·\n\nu=User.where(id:1).first\n//å¯ä»¥æŸ¥çœ‹åˆ°ç®¡ç†å‘˜ç”¨æˆ·åï¼Œä¸€èˆ¬ä¸ºroot\n\nè®¾ç½®ç®¡ç†å‘˜å¯†ç \n\nu.password=&#039;xxxxxxxxx&#039;\n\nç¡®è®¤å¯†ç \n\nu.password_confirmation=&#039;xxxxxxxxx&#039;\n\nä¿å­˜ä¿®æ”¹\n\nu.save!\n4. åˆ›å»ºæ–°ç”¨æˆ·ä¸é¡¹ç›®ä»“åº“\n\næ³¨å†Œæ–°ç”¨æˆ·ï¼Œä½¿ç”¨ç®¡ç†å‘˜è®¤è¯é€šè¿‡\nåˆ›å»ºä»£ç ä»“åº“\næœ¬åœ°ä¸gitä»“åº“å…³è”\nåˆ›å»ºsshå…¬é’¥ç§é’¥\n\nssh-keygen -o -t rsa -b 2048 -C &quot;email@example.com&quot;\n\nå°†ç”Ÿæˆçš„id_rsa.pubå¤åˆ¶åˆ°ä»£ç ä»“åº“çš„SSH Keysä¸Š\n\n\n\n                  \n                  WARNING\n                  \n                \n\n\n\\qquadå¦‚æœGitlabä¸Jenkinséƒ¨ç½²åœ¨å†…ç½‘ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨ç®¡ç†å‘˜é…ç½®å‡ºç«™è¯·æ±‚\n\\qquadæ­¥éª¤å¦‚ä¸‹(ç®¡ç†å‘˜ç™»å½•)ï¼š\nAdmin area â†’ Setting â†’ Network â†’ Outbound requests\nå‹¾é€‰å…è®¸webhookå‡ºç«™åˆ°å†…ç½‘åœ°å€\n\n\n\n\nä¹Ÿå¯ä¸ç”¨ssh keyï¼Œæœ¬åœ°ä¸gitlabå…³è”èµ°httpï¼Œæ¨é€æ—¶ä½¿ç”¨æœ‰æƒé™æ¨é€çš„æˆå‘˜ç”¨æˆ·åå’Œå¯†ç \n"},"äº‘è®¡ç®—/DevOps/Jenkinså®¹å™¨éƒ¨ç½²é…ç½®":{"slug":"äº‘è®¡ç®—/DevOps/Jenkinså®¹å™¨éƒ¨ç½²é…ç½®","filePath":"äº‘è®¡ç®—/DevOps/Jenkinså®¹å™¨éƒ¨ç½²é…ç½®.md","title":"Jenkinså®¹å™¨éƒ¨ç½²é…ç½®","links":["Linuxç³»ç»Ÿé…ç½®ä¸è°ƒä¼˜/CentOS7.9-å‘½ä»¤æ‚é¡¹"],"tags":["äº‘åŸç”Ÿ","CentOS","CICD"],"content":"\nä¸€ã€ç®€ä»‹\né…ç½®ç¯å¢ƒå¦‚ä¸‹ï¼š\nç³»ç»Ÿé—®é¢˜ã€ä»£ç†é…ç½®ç­‰è¯·å‚è€ƒCentOS7.9 å‘½ä»¤æ‚é¡¹\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nç³»ç»ŸåŠè½¯ä»¶ç¯å¢ƒç‰ˆæœ¬CentOS7.9Docker20ä»¥ä¸Šçš„ç‰ˆæœ¬å³å¯Jenkinsé•œåƒjenkins/jenkins:lts\n\näºŒã€Jenkinséƒ¨ç½²ä¸é…ç½®\n1.è¿è¡ŒJenkinså®¹å™¨\ndocker run -d --name=jenkins \\\n-p 8080:8080 \\\n-u root \\\n--restart always \\ n\n-v /var/run/docker.sock:/var/run/docker.sock \\\n-v /usr/bin/docker:/usr/bin/docker \\\n-v /opt/jenkins_home:/var/jenkins_home \\\njenkins/jenkins:lts\n2.é…ç½®Jenkins\n2.1è·å–ç®¡ç†å‘˜å¯†ç ï¼Œç½‘é¡µè®¿é—®å¹¶è¾“å…¥å¯†ç è§£é”Jenkins\ncat /opt/jenkins_home/secrets/initialAdminPassword\næˆ–è€…è¿›å…¥å®¹å™¨\ncat /var/jenkins_home/secrets/initialAdminPassword\n2.2 å®‰è£…æ’ä»¶\n1ï¼‰ç›´æ¥é€‰å®‰è£…æ¨èæ’ä»¶ï¼Œç­‰å¾…å®‰è£…å®Œæ¯•\n2ï¼‰åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ· admin\n3ï¼‰å®‰è£…å…¶ä»–æ’ä»¶\nç³»ç»Ÿç®¡ç† â†’ æ’ä»¶ç®¡ç† â†’ å¯é€‰æ’ä»¶æœç´¢æ¡†ï¼Œæœç´¢å¹¶å®‰è£…ä»¥ä¸‹æ’ä»¶ï¼š\n\nGitlab   Gitlab API\nDocker\nPublish Over SSH\n\n2.3åˆ›å»ºJenkinsä»»åŠ¡\n2.3.1 åˆ›å»ºfreestyleé¡¹ç›®\nè¾“å…¥é¡¹ç›®åç§°xxxï¼Œé€‰æ‹©freestyleé¡¹ç›®ã€‚åå­—æœ€å¥½èƒ½ä¸Gitlabçš„é¡¹ç›®å¯¹åº”\n2.3.2 é…ç½®freestyleé¡¹ç›®\n2.3.2.1 é…ç½®æºç ç®¡ç†\næºç ç®¡ç†é€‰æ‹©Git\n\\qquadRepository URLï¼šæ­¤å¤„å¯ä»¥å¡«å…¥Gitlabé¡¹ç›®çš„sshæˆ–è€…httpä¸¤ç§åœ°å€åŒºåˆ«ä¸º\n\\qquad 1ï¼‰å¡«å…¥httpåœ°å€ï¼Œåˆ™Jenkinså‡­è¯é€‰æ‹©Gitlabåˆ›å»ºé¡¹ç›®çš„ç”¨æˆ·æˆ–æœ‰æƒé™æäº¤çš„ç”¨æˆ·å’Œå…¶å¯†ç è¿æ¥Github\n\\qquad 2ï¼‰å¡«å…¥sshåœ°å€ï¼Œåˆ™åœ¨Jenkinså‡­è¯ä¸­ç”¨æˆ·å¡«å…¥gitï¼Œç§é’¥é€‰æ‹©ä¸Gitlabé¡¹ç›®é…å¯¹çš„ç§é’¥ï¼Œä¸”éœ€è¦åœ¨å®¹å™¨å†…ä½¿ç”¨ç§é’¥è¿æ¥ä¸€æ¬¡åï¼Œæ·»åŠ ç›®æ ‡æœåŠ¡å™¨çš„æŒ‡çº¹åˆ°known_hostsæ–‡ä»¶ä¸­ï¼Œç½‘é¡µé…ç½®ç”Ÿæ•ˆã€‚\n\\qquadç§é’¥æŒ‚è½½æˆ–å¤åˆ¶è¿›å®¹å™¨ï¼Œè¿›å…¥å®¹å™¨æ‰§è¡Œåï¼Œå¯æ·»åŠ ç›®æ ‡æœåŠ¡å™¨çš„æŒ‡çº¹åˆ°known_hostsæ–‡ä»¶ï¼š\nssh -i /path/to/private_key -p 2222 gitå½¢å¼çš„é¡¹ç›®åœ°å€\n2.3.2.2 é…ç½®è§¦å‘å™¨\n\nå‹¾é€‰Build when a change is pushed to GitLab â€¦ åŒæ—¶è®°å¾— GitLab webhook URL\nä¸‹ç¿»ç‚¹å‡»Generateï¼Œç”Ÿæˆtoken\nåˆ‡åˆ°Gitlabï¼Œåœ¨é¡¹ç›®ä¸­Setting â†’ Webhooksï¼Œå¡«å…¥ä¸Šè¿°URLå’Œtokenï¼Œå‹¾é€‰é€‚å½“çš„è§¦å‘æ¡ä»¶(Push eventsç­‰)ï¼Œä¸‹æ‹‰æœ€åç‚¹å‡»ç¡®å®šï¼Œç”Ÿæˆwebhooksï¼Œç‚¹å‡»editåï¼Œèƒ½çœ‹åˆ°å†å²è§¦å‘çš„è¯¦ç»†ä¿¡æ¯ã€‚ç‚¹å‡»testï¼Œå¯ä»¥å‘é€å¯¹åº”çš„è§¦å‘äº‹ä»¶ï¼Œç”¨æ¥æ‰‹åŠ¨æµ‹è¯•è”é€šJenkinsçš„æµæ°´çº¿æˆ–å…¶ä»–ä»»åŠ¡\n\n2.3.2.3 é…ç½®æ„å»º\n\\qquadè¿™é‡Œä¸»è¦æ˜¯é…ç½®C++/CMakeæ„å»ºé¡¹ç›®ã€‚æ‰€ä»¥ build step å‹¾é€‰ æ‰§è¡Œshell\nè¾“å…¥å¦‚ä¸‹ï¼š\n#!/bin/bash\nset -ex\n \nHOST_PATH=&quot;/opt/jenkins_home/workspace/hello&quot;\n \ndocker run --rm \\\n  -v &quot;$HOST_PATH&quot;:/build \\\n  -w /build \\\n  cpp-build-image:v1 bash ./build.sh\n\\qquadæœ¬åœ°è‡ªè¡Œå‡†å¤‡å¥½ç¼–è¯‘ç¯å¢ƒçš„é•œåƒï¼Œå¦å¤–æ­¤å¤„æ˜¯Jenkinså®¹å™¨æŒ‚è½½ç›®å½•/opt/jenkins_home:/var/jenkins_homeï¼Œç›¸åº”çš„Jenkinsæ‹‰å–çš„Gitlabé¡¹ç›®ä¼šåœ¨å®¹å™¨å†…çš„/var/jenkins_home/workspace/é¡¹ç›®å ï¼Œä¹Ÿå°±æ˜¯å®¿ä¸»æœºçš„/opt/jenkins_home/workspace/é¡¹ç›®åï¼Œé€‰æ‹©è¿è¡Œç¼–è¯‘å®¹å™¨æ—¶ï¼Œå°†Gitlabé¡¹ç›®ç›®å½•ç”±å®¿ä¸»æœºæŒ‚è½½è¿›ç¼–è¯‘å®¹å™¨ï¼Œä¸”å·¥ä½œç›®å½•è¿›å…¥é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ­¤å¤„éœ€å¼€å‘äººå‘˜å°†æ„å»ºå‘½ä»¤è‡ªè¡Œå‡†å¤‡å¥½ï¼Œä¸”éšé¡¹ç›®ä¸€åŒæäº¤è¿›Gitlabã€‚æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å®Œæˆçš„å¯æ‰§è¡Œæ–‡ä»¶å’Œåº“éƒ½ä¼šåœ¨å®¿ä¸»æœºçš„/opt/jenkins_home/workspace/é¡¹ç›®å ç›®å½•ä¸‹ï¼Œå–å†³äº build.shçš„æ„å»ºç»†èŠ‚ã€‚åç»­å¯å°†æ„å»ºçš„äº§ç‰©ç»§ç»­æ‰“åŒ…æˆ–ä¸Šä¼ \n\n\n                  \n                  Jenkinsçš„æ„å»ºæ­¥éª¤é‡Œï¼Œbuild stepå¯ä»¥æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œå› æ­¤å¯ä»¥æ‹†åˆ†å¤šæ­¥ï¼Œä¹Ÿå¯ä»¥ä¸€æ­¥æ„å»ºå®Œï¼Œç„¶åä½¿ç”¨docker buildæ‰“åŒ… \n                  \n                \n\n\n\n                  \n                  build stepæ¯”è¾ƒè‡ªç”±ï¼Œä¸»è¦æœåŠ¡äºæœ€ç»ˆçš„ç›®çš„ï¼Œèƒ½è¾¾æˆç›®çš„å³å¯ \n                  \n                \n\n"},"äº‘è®¡ç®—/DevOps/ROS2+PX4å®‰è£…é…ç½®åŠå¼€å‘ç¯å¢ƒæ­å»º":{"slug":"äº‘è®¡ç®—/DevOps/ROS2+PX4å®‰è£…é…ç½®åŠå¼€å‘ç¯å¢ƒæ­å»º","filePath":"äº‘è®¡ç®—/DevOps/ROS2+PX4å®‰è£…é…ç½®åŠå¼€å‘ç¯å¢ƒæ­å»º.md","title":"ROS2+PX4å®‰è£…é…ç½®åŠå¼€å‘ç¯å¢ƒæ­å»º","links":["Linuxç³»ç»Ÿé…ç½®ä¸è°ƒä¼˜/CentOS7.9-å‘½ä»¤æ‚é¡¹"],"tags":["ROS2","PX4","ä¸­é—´ä»¶"],"content":"\nä¸€ã€ç®€ä»‹\n\né…ç½®ç¯å¢ƒå¦‚ä¸‹ï¼š\n\nUbuntu22.04\nROS2 Humble\nPX4\nGazebo Ignition ï¼ˆgz sim8.9ï¼‰\nQGroundControl\nMicroXRCEAgent\n\n\næœ€ç»ˆå®Œæˆå¤šæ— äººæœºæ•°æ®è½¬å‘æ¥å…¥ROS2\n\n\n                  \n                  WARNING\n                  \n                \n\n\næ‰€æœ‰å®‰è£…æ“ä½œå‡ä¸ºæ™®é€šç”¨æˆ·ï¼Œérootç”¨æˆ·ä¸‹è¿›è¡Œ\n\n\n\nç³»ç»Ÿé—®é¢˜ã€ä»£ç†é…ç½®ç­‰è¯·å‚è€ƒCentOS7.9 å‘½ä»¤æ‚é¡¹\n\näºŒã€PX4æºç ä¸‹è½½ç¼–è¯‘\n\næ‹‰æºç \n\ngit clone github.com/PX4/PX4-Autopilot.git --recursive\n\nå®‰è£…ä¾èµ–\n\nbash ./PX4-Autopilot/Tools/setup/ubuntu.sh\n\nå®‰è£…antã€å®‰è£…jdk11\n\nsudo apt install ant openjdk-11-jdk\n\nç¼–è¯‘\n\ncd PX4-Autopilot\nmake px4_sitl jmavsim\n\nçœ‹åˆ°jmavsimè¿è¡Œå³ä¸ºæˆåŠŸ\nç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°èµ·é£ã€é™è½ã€å…³é—­\n\ncommander takeoff/land/shutdown\n\nä¸‰ã€ROS2å®‰è£…\næŒ‰ç…§æµç¨‹å®‰è£…ROS2 Humbleç‰ˆæœ¬\nwget fishros.com/install -O fishros &amp;&amp; . fishros\n\nå››ã€å®‰è£…Gazebo Ignition\n1. å®‰è£…é…ç½®\n1.1 å®‰è£…\ncd ~/PX4-Autopilot\nsudo wget packages.osrfoundation.org/gazebo.gpg -O /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg\nsudo apt-get update\nsudo apt-get install gz-garden\n\n\n                  \n                  å¯èƒ½ä¼šæç¤ºå·²å®‰è£…ï¼Œè½¯ä»¶èƒ½çœ‹åˆ°Gazebo Sim8å³å¯ \n                  \n                \n\n1.2 ä¸‹è½½å¯åŠ¨è„šæœ¬\nwget raw.githubusercontent.com/PX4/PX4-gazebo-models/main/simulation-gazebo\n1.3 è¿è¡Œè„šæœ¬æ‹‰èµ·Gazebo Sim\npython3 simulation-gazebo\n2. é…ç½®é—®é¢˜\n\n\n                  \n                  è‹¥ä¸é…ç½®ï¼Œmake px4_sitl gz_x500 æˆ–è€… python3 simulation-gazeboä¼šé—ªé€€ \n                  \n                \n\n\nGazebo-GLé—®é¢˜\né”™è¯¯ä¿¡æ¯ï¼šÂ OpenGLÂ 3.3 is not supported. Please update your graphics card drivers.\nè§£å†³æ–¹æ¡ˆï¼š\n\nvim ~/.bashrc\n//æ·»åŠ :\nexport MESA_GL_VERSION_OVERRIDE=3.3\nsource ~/.bashrc\n\nGazeboé—ªé€€\né”™è¯¯ä¿¡æ¯ï¼šÂ æŒ‰ä¸Šè¿°æ­¥éª¤æ“ä½œä¹‹åï¼Œå°†ä¸å†æç¤ºé”™è¯¯ä¿¡æ¯ï¼Œä½†Gazeboè¿˜æ˜¯ä¼šé—ªé€€\nè§£å†³æ–¹æ¡ˆï¼š\n\nvim ~/.bashrc\n//æ·»åŠ :\nexport PX4_GZ_SIM_RENDER_ENGINE=ogre\nsource ~/.bashrc\n\näº”ã€MicroXRCE-DDS Agentçš„å®‰è£…\n\nä¸‹è½½æºç \n\ngit clone github.com/eProsima/Micro-XRCE-DDS-Agent.git\n\nç¼–è¯‘\n\ncd Micro-XRCE-DDS-Agent \nmkdir build &amp;&amp; cd build\ncmake .. &amp;&amp; make -j8\n\nå®‰è£…\n\nsudo make install\nsudo ldconfig /usr/local/lib/\n\nå…­ã€QGCåœ°é¢ç«™å®‰è£…\n\n\n                  \n                  å¿…é¡»æ˜¯érootçš„æ™®é€šç”¨æˆ·æ‰§è¡Œå®‰è£… \n                  \n                \n\n\nå®‰è£…ä¾èµ– ubuntu20ä»¥ä¸Šç‰ˆæœ¬ï¼š\n\nsudo usermod -a -G dialout $USER\nsudo apt-get remove modemmanager -y\nsudo apt install gstreamer1.0-plugins-bad gstreamer1.0-libav gstreamer1.0-gl -y\nsudo apt install libfuse2 -y\nsudo apt install libxcb-xinerama0 libxkbcommon-x11-0 libxcb-cursor0 -y\n\n\né‡å¯ç”Ÿæ•ˆ\n\n\nä¸‹è½½å®‰è£…åŒ…   å»å®˜ç½‘QGC Guide (master) æ‰¾åˆ°linuxå®‰è£…åŒ…QGC_Linux\n\n\nwget d176tv9ibo4jno.cloudfront.net/latest/QGroundControl.AppImage\n\nå®‰è£…è¿è¡Œ\n\nchmod +x ./QGroundControl.AppImage \n./QGroundControl.AppImage\n\nä¸ƒã€Offboardæµ‹è¯•ã€å¼€å‘\n1.å¼€å‘ç¯å¢ƒæ­å»º\n\nåˆ›å»ºROS2å·¥ä½œç©ºé—´\n\nmkdir -p ~/ros2_ws/src\n\nä¸‹è½½æºç \n\ncd ~/ros2_ws/src\ngit clone github.com/PX4/px4_msgs.git \ngit clone github.com/PX4/px4_ros_com.git \n\n\n                  \n                  WARNING\n                  \n                \n\n\n\nä¸è¦éšä¾¿åˆ‡åˆ†æ”¯ï¼Œpx4_msgsé‡Œçš„msgæ•°æ®æ ¼å¼å¿…é¡»ä¸PX4_Autopiloté‡Œçš„msgæ•°æ®æ ¼å¼å¯¹åº”\nåˆ†æ”¯ç‰ˆæœ¬å¯¹åº”å…³ç³»è¯·æŸ¥çœ‹  px4_msgsç‰ˆæœ¬å¯¹åº”å…³ç³»\nå¦åˆ™ä¼šæŠ¥é”™ï¼š[RTPS_READER_HISTORY Error] Change payload size of â€˜164â€™ bytes is larger than the history payload size of â€˜151â€™ bytes and cannot be resized. â†’ Function can_change_be_added_nts\n\n\n\n\n\nç¼–è¯‘\n\ncd ~/ros2_ws\ncolcon build\n\né…ç½®ç¯å¢ƒå˜é‡\n\necho &quot;source ~/ros2_ws/install/setup.bash&quot; &gt;&gt; ~/.bashrc \nsource ~/.bashrc\n2. å•æœºæµ‹è¯•\n\n\n                  \n                  è¿è¡ŒæˆåŠŸåï¼Œå¯ä»¥çœ‹åˆ°Gazebo Simä¸­æ— äººæœºèµ·é£åˆ°5m \n                  \n                \n\n\nå¼€å¯QGCåœ°é¢ç«™\n\n./QGroundControl.AppImage\n\nå¼€å¯é€šä¿¡ä¸­è½¬\n\nMicroXRCEAgent udp4 -p 8888\n\nå¼€å¯px4ä»¿çœŸ\n\ncd ~/PX4_Autopilot\nmake px4_sitl gz_x500\n\nè¿è¡Œpx4çš„Offboardæ¨¡å¼æºç \n\nros2 run px4_ros_com offboard_control\n3.å¤šæœºæµ‹è¯•\n\nå¯åŠ¨QGCåœ°é¢ç«™\n\n./QGroundControl.AppImage\n\nè„šæœ¬æ‹‰èµ·Gazebo Sim\n\npython3 simulation-gazebo\n\nå¯åŠ¨PX4æ— äººæœº\n\n\n\n                  \n                  NOTICE\n                  \n                \n\n\n3.1 PX4_GZ_STANDALONE=1è¡¨æ˜æˆ‘ä»¬ä½¿ç”¨standaloneå¯åŠ¨ï¼Œä¸å¯åŠ¨ä»¿çœŸï¼Œåªå¯åŠ¨PX4ï¼Œä¼šè‡ªåŠ¨åœ¨Gazeboä¸­æ·»åŠ é£æœº\n3.2 PX4_SYS_AUTOSTART=4001ä¸ºå¿…é¡»å­—æ®µ\n3.3 PX4_GZ_MODEL_POSE=â€œ0,2â€è¡¨ç¤ºæ— äººæœºçš„ä½ç½®ï¼Œæ³¨æ„ä¸åŒçš„é£æœºä½ç½®åº”è¯¥ä¸ä¸€æ ·\n3.4 PX4_SIM_MODEL=gz_x500æŒ‡å®šäº†é£æœºæ¨¡å‹ä¸ºx500\n3.5 è¦ä¸ºå¤šæœºä»¿çœŸçš„æ¯ä¸€æ¶æ— äººæœºç»™å®šä¸€ä¸ªå•ç‹¬çš„ç¼–å·ï¼Œè¿™é‡Œä¸º -i 0ï¼Œå³ç¬¬0å·æ— äººæœº\n\n\n\nå¯åŠ¨ç¬¬1æ¶æ— äººæœº\ncd ~/PX4-Autopilot\nPX4_GZ_STANDALONE=1 PX4_SYS_AUTOSTART=4001 PX4_GZ_MODEL_POSE=&quot;0,1&quot; PX4_SIM_MODEL=gz_x500 ./build/px4_sitl_default/bin/px4 -i 1\nå¯åŠ¨ç¬¬næ¶æ— äººæœº\ncd ~/PX4-Autopilot\nPX4_GZ_STANDALONE=1 PX4_SYS_AUTOSTART=4001 PX4_GZ_MODEL_POSE=&quot;0,-1&quot; PX4_SIM_MODEL=gz_x500 ./build/px4_sitl_default/bin/px4 -i n\næ­¤æ—¶åœ¨æ¯ä¸ªpx4ç»ˆç«¯ï¼Œéƒ½å¯ä»¥è¾“å…¥ commander takeoff/land æ§åˆ¶æ— äººæœºèµ·é™\n\næ·»åŠ é€šä¿¡æ¡¥æ¥\n\nMicroXRCEAgent udp4 -p 8888\n\nros2æ•°æ®æ¥å…¥\n\n\næ­¤æ—¶å¯ä»¥åœ¨çœ‹åˆ°æ— äººæœºçš„topicï¼Œä¸”å‘½åç©ºé—´ä¸ºpx4_ç¼–å·\n\nros2 topic list\n\nros2è®¢é˜…æ¶ˆæ¯ï¼Œå¯ä»¥çœ‹åˆ°æ‰“å°è¾“å‡º\n\nros2 topic echo /px4_1/fmu/out/vehicle_gps_position\nros2 topic echo /px4_2/fmu/out/sensor_combined"},"äº‘è®¡ç®—/DevOps/å•èŠ‚ç‚¹Dockeréƒ¨ç½²etcdæœåŠ¡":{"slug":"äº‘è®¡ç®—/DevOps/å•èŠ‚ç‚¹Dockeréƒ¨ç½²etcdæœåŠ¡","filePath":"äº‘è®¡ç®—/DevOps/å•èŠ‚ç‚¹Dockeréƒ¨ç½²etcdæœåŠ¡.md","title":"å•èŠ‚ç‚¹Dockeréƒ¨ç½²etcdæœåŠ¡","links":[],"tags":["ä¸­é—´ä»¶"],"content":"æ‹‰å–é•œåƒ\ndocker pull swr.cn-north-4.myhuaweicloud.com/ddn-k8s/docker.io/bitnami/etcd:3.5\n\ndocker tag  swr.cn-north-4.myhuaweicloud.com/ddn-k8s/docker.io/bitnami/etcd:3.5  bitnami/etcd:3.5\n\næ„å»ºetcdæœåŠ¡ç«¯å®¹å™¨\ndocker run -d --name=etcd-server \\\n-e ALLOW_NONE_AUTHENTICATION=yes \\\nbitnami/etcd:3.5 \\\netcd\næ„å»ºetcdå®¢æˆ·ç«¯å®¹å™¨ï¼Œç”¨äºæµ‹è¯•\ndocker run -d --name=etcd-client \\\n-e ALLOW_NONE_AUTHENTICATION=yes \\\nbitnami/etcd:3.5 \\\netcd\nå®¢æˆ·ç«¯å®¹å™¨å†…ï¼Œæ“ä½œetcd-server\netcdctl --endpoints=http://172.17.0.2:2379 put /mykey &quot;value&quot;\n \netcdctl --endpoints=http://172.17.0.6:2379 get /mykey\n# è·å–å…¨éƒ¨ä»¥mykeyä¸ºå‰ç¼€çš„value\netcdctl --endpoints=http://172.17.0.6:2379 get /mykey --prefix\nä»£ç å—æµ‹è¯•\n{\n    &quot;command&quot;:&quot;engine_step&quot;,\n    &quot;args&quot;:{\n        [\n            &quot;x&quot;:1,\n            &quot;y&quot;:2\n        ]\n    }\n}"},"äº‘è®¡ç®—/K8S/Ubuntu20.04å®‰è£…MiniKube":{"slug":"äº‘è®¡ç®—/K8S/Ubuntu20.04å®‰è£…MiniKube","filePath":"äº‘è®¡ç®—/K8S/Ubuntu20.04å®‰è£…MiniKube.md","title":"Ubuntu20.04å®‰è£…MiniKube","links":[],"tags":["ä¸­é—´ä»¶","K8S","MiniKube"],"content":"å®‰è£…Docker (é˜¿é‡Œäº‘é•œåƒ)\n1.å¸è½½Dockeræ—§ç‰ˆæœ¬\nsudo apt-get remove docker docker-engine docker-ce docker.io\n2.æ·»åŠ é˜¿é‡Œäº‘GPGç§˜é’¥\ncurl -fsSL mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n3.è®¾ç½®å­˜å‚¨åº“\nsudo add-apt-repository &quot;deb [arch=amd64] mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable&quot;\n4.å®‰è£…docker\nsudo apt-get update\n \nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin\n5.éªŒè¯\nsudo docker version\n \nsudo systemctl status dockerï¼Œæœªè¿è¡Œæ—¶æ‰§è¡Œsudo systemctl start dockerå¯åŠ¨docker\n \nsudo docker run hello-world è¿è¡Œä¸ªå®¹å™¨è¯•ä¸‹\n \nsudo systemctl enable docker  # è®¾ç½®å¼€æœºè‡ªå¯\n6.æ·»åŠ é˜¿é‡Œé•œåƒåŠ é€Ÿ\nsudo vim /etc/docker/daemon.json\n#æ·»åŠ ï¼š\n{\n    &quot;registry-mirrors&quot;: [\n            &quot;docker.211678.top&quot;,\n            &quot;docker.1panel.live&quot;,\n            &quot;hub.rat.dev&quot;,\n            &quot;docker.m.daocloud.io&quot;,\n            &quot;do.nark.eu.org&quot;,\n            &quot;dockerpull.com&quot;,\n            &quot;dockerproxy.cn&quot;,\n            &quot;docker.awsl9527.cn&quot;\n      ]\n}\n \nsudo systemctl daemon-reload\nsudo systemctl restart docker\nå®‰è£…MiniKube\n{% note color:warning MiniKubeä¸­æ–‡æ–‡æ¡£ %}\n{% note color:error MiniKubeä¸­æ–‡æ–‡æ¡£ %}\n1.ä¾èµ–\nsudo apt-get install -y apt-transport-https\n2.æ·»åŠ é˜¿é‡ŒGPG\nsudo curl mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | sudo apt-key add -\n3.æ·»åŠ é˜¿é‡Œaptæº\nsudo tee /etc/apt/sources.list.d/kubernetes.list &lt;&lt;-&#039;EOF&#039; \ndeb mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main \nEOF\n \nsudo apt-get update\n4.å®‰è£…kubectl\nsudo apt-get install -y kubectl\n5.æ·»åŠ ç”¨æˆ·åˆ°dockerç»„\nsudo usermod -aG docker $USER &amp;&amp; newgrp docker\n6.å®‰è£…mibikube\ncurl -LO storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\n \nsudo install minikube-linux-amd64 /usr/local/bin/minikube\n7.å¯åŠ¨minikube\nminikube start --driver=docker --image-mirror-country=cn --image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers --kubernetes-version=1.23.8\næ³¨ï¼šç»“åˆdockerä½¿ç”¨æ—¶ï¼Œk8sç‰ˆæœ¬æœ€å¥½ä¸è¦ç”¨1.24åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œk8sä»1.24ç‰ˆæœ¬å¼€å§‹ä¸åœ¨ç›´æ¥å…¼å®¹dockerï¼Œéœ€è¦å®‰è£…cri-dockerã€‚\nä¸ºäº†æ–¹ä¾¿ï¼Œè®¾ç½®alias\nsudo vim ~/.bashrc\n#æ·»åŠ ï¼š\nalias minikube.cn=&quot;minikube start --image-mirror-country=cn --image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers --kubernetes-version=1.23.8&quot;\nalias kubectl=&quot;minikube kubectl --&quot;\n#ç”Ÿæ•ˆ\nsource ~/.bashrc"}}